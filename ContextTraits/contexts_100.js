require("underscore");
var Trait = require("./traits.js").Trait;
var cop = require("./context-traits.js");

var foo;
Foo = function() {};
Foo.prototype.test = function() {
    throw new Error('Base method needs to be specialized');
}
foo = new Foo();

Context1 = new cop.Context();
Adaptation1 = Trait ({
    test: function() {
        return 1;
    }
});
Context1.adapt(foo, Adaptation1); 

Context2 = new cop.Context();
Adaptation2 = Trait ({
    test: function() {
        return 2;
    }
});
Context2.adapt(foo, Adaptation2); 

Context3 = new cop.Context();
Adaptation3 = Trait ({
    test: function() {
        return 3;
    }
});
Context3.adapt(foo, Adaptation3); 

Context4 = new cop.Context();
Adaptation4 = Trait ({
    test: function() {
        return 4;
    }
});
Context4.adapt(foo, Adaptation4); 

Context5 = new cop.Context();
Adaptation5 = Trait ({
    test: function() {
        return 5;
    }
});
Context5.adapt(foo, Adaptation5); 

Context6 = new cop.Context();
Adaptation6 = Trait ({
    test: function() {
        return 6;
    }
});
Context6.adapt(foo, Adaptation6); 

Context7 = new cop.Context();
Adaptation7 = Trait ({
    test: function() {
        return 7;
    }
});
Context7.adapt(foo, Adaptation7); 

Context8 = new cop.Context();
Adaptation8 = Trait ({
    test: function() {
        return 8;
    }
});
Context8.adapt(foo, Adaptation8); 

Context9 = new cop.Context();
Adaptation9 = Trait ({
    test: function() {
        return 9;
    }
});
Context9.adapt(foo, Adaptation9); 

Context10 = new cop.Context();
Adaptation10 = Trait ({
    test: function() {
        return 10;
    }
});
Context10.adapt(foo, Adaptation10); 

Context11 = new cop.Context();
Adaptation11 = Trait ({
    test: function() {
        return 11;
    }
});
Context11.adapt(foo, Adaptation11); 

Context12 = new cop.Context();
Adaptation12 = Trait ({
    test: function() {
        return 12;
    }
});
Context12.adapt(foo, Adaptation12); 

Context13 = new cop.Context();
Adaptation13 = Trait ({
    test: function() {
        return 13;
    }
});
Context13.adapt(foo, Adaptation13); 

Context14 = new cop.Context();
Adaptation14 = Trait ({
    test: function() {
        return 14;
    }
});
Context14.adapt(foo, Adaptation14); 

Context15 = new cop.Context();
Adaptation15 = Trait ({
    test: function() {
        return 15;
    }
});
Context15.adapt(foo, Adaptation15); 

Context16 = new cop.Context();
Adaptation16 = Trait ({
    test: function() {
        return 16;
    }
});
Context16.adapt(foo, Adaptation16); 

Context17 = new cop.Context();
Adaptation17 = Trait ({
    test: function() {
        return 17;
    }
});
Context17.adapt(foo, Adaptation17); 

Context18 = new cop.Context();
Adaptation18 = Trait ({
    test: function() {
        return 18;
    }
});
Context18.adapt(foo, Adaptation18); 

Context19 = new cop.Context();
Adaptation19 = Trait ({
    test: function() {
        return 19;
    }
});
Context19.adapt(foo, Adaptation19); 

Context20 = new cop.Context();
Adaptation20 = Trait ({
    test: function() {
        return 20;
    }
});
Context20.adapt(foo, Adaptation20); 

Context21 = new cop.Context();
Adaptation21 = Trait ({
    test: function() {
        return 21;
    }
});
Context21.adapt(foo, Adaptation21); 

Context22 = new cop.Context();
Adaptation22 = Trait ({
    test: function() {
        return 22;
    }
});
Context22.adapt(foo, Adaptation22); 

Context23 = new cop.Context();
Adaptation23 = Trait ({
    test: function() {
        return 23;
    }
});
Context23.adapt(foo, Adaptation23); 

Context24 = new cop.Context();
Adaptation24 = Trait ({
    test: function() {
        return 24;
    }
});
Context24.adapt(foo, Adaptation24); 

Context25 = new cop.Context();
Adaptation25 = Trait ({
    test: function() {
        return 25;
    }
});
Context25.adapt(foo, Adaptation25); 

Context26 = new cop.Context();
Adaptation26 = Trait ({
    test: function() {
        return 26;
    }
});
Context26.adapt(foo, Adaptation26); 

Context27 = new cop.Context();
Adaptation27 = Trait ({
    test: function() {
        return 27;
    }
});
Context27.adapt(foo, Adaptation27); 

Context28 = new cop.Context();
Adaptation28 = Trait ({
    test: function() {
        return 28;
    }
});
Context28.adapt(foo, Adaptation28); 

Context29 = new cop.Context();
Adaptation29 = Trait ({
    test: function() {
        return 29;
    }
});
Context29.adapt(foo, Adaptation29); 

Context30 = new cop.Context();
Adaptation30 = Trait ({
    test: function() {
        return 30;
    }
});
Context30.adapt(foo, Adaptation30); 

Context31 = new cop.Context();
Adaptation31 = Trait ({
    test: function() {
        return 31;
    }
});
Context31.adapt(foo, Adaptation31); 

Context32 = new cop.Context();
Adaptation32 = Trait ({
    test: function() {
        return 32;
    }
});
Context32.adapt(foo, Adaptation32); 

Context33 = new cop.Context();
Adaptation33 = Trait ({
    test: function() {
        return 33;
    }
});
Context33.adapt(foo, Adaptation33); 

Context34 = new cop.Context();
Adaptation34 = Trait ({
    test: function() {
        return 34;
    }
});
Context34.adapt(foo, Adaptation34); 

Context35 = new cop.Context();
Adaptation35 = Trait ({
    test: function() {
        return 35;
    }
});
Context35.adapt(foo, Adaptation35); 

Context36 = new cop.Context();
Adaptation36 = Trait ({
    test: function() {
        return 36;
    }
});
Context36.adapt(foo, Adaptation36); 

Context37 = new cop.Context();
Adaptation37 = Trait ({
    test: function() {
        return 37;
    }
});
Context37.adapt(foo, Adaptation37); 

Context38 = new cop.Context();
Adaptation38 = Trait ({
    test: function() {
        return 38;
    }
});
Context38.adapt(foo, Adaptation38); 

Context39 = new cop.Context();
Adaptation39 = Trait ({
    test: function() {
        return 39;
    }
});
Context39.adapt(foo, Adaptation39); 

Context40 = new cop.Context();
Adaptation40 = Trait ({
    test: function() {
        return 40;
    }
});
Context40.adapt(foo, Adaptation40); 

Context41 = new cop.Context();
Adaptation41 = Trait ({
    test: function() {
        return 41;
    }
});
Context41.adapt(foo, Adaptation41); 

Context42 = new cop.Context();
Adaptation42 = Trait ({
    test: function() {
        return 42;
    }
});
Context42.adapt(foo, Adaptation42); 

Context43 = new cop.Context();
Adaptation43 = Trait ({
    test: function() {
        return 43;
    }
});
Context43.adapt(foo, Adaptation43); 

Context44 = new cop.Context();
Adaptation44 = Trait ({
    test: function() {
        return 44;
    }
});
Context44.adapt(foo, Adaptation44); 

Context45 = new cop.Context();
Adaptation45 = Trait ({
    test: function() {
        return 45;
    }
});
Context45.adapt(foo, Adaptation45); 

Context46 = new cop.Context();
Adaptation46 = Trait ({
    test: function() {
        return 46;
    }
});
Context46.adapt(foo, Adaptation46); 

Context47 = new cop.Context();
Adaptation47 = Trait ({
    test: function() {
        return 47;
    }
});
Context47.adapt(foo, Adaptation47); 

Context48 = new cop.Context();
Adaptation48 = Trait ({
    test: function() {
        return 48;
    }
});
Context48.adapt(foo, Adaptation48); 

Context49 = new cop.Context();
Adaptation49 = Trait ({
    test: function() {
        return 49;
    }
});
Context49.adapt(foo, Adaptation49); 

Context50 = new cop.Context();
Adaptation50 = Trait ({
    test: function() {
        return 50;
    }
});
Context50.adapt(foo, Adaptation50); 

Context51 = new cop.Context();
Adaptation51 = Trait ({
    test: function() {
        return 51;
    }
});
Context51.adapt(foo, Adaptation51); 

Context52 = new cop.Context();
Adaptation52 = Trait ({
    test: function() {
        return 52;
    }
});
Context52.adapt(foo, Adaptation52); 

Context53 = new cop.Context();
Adaptation53 = Trait ({
    test: function() {
        return 53;
    }
});
Context53.adapt(foo, Adaptation53); 

Context54 = new cop.Context();
Adaptation54 = Trait ({
    test: function() {
        return 54;
    }
});
Context54.adapt(foo, Adaptation54); 

Context55 = new cop.Context();
Adaptation55 = Trait ({
    test: function() {
        return 55;
    }
});
Context55.adapt(foo, Adaptation55); 

Context56 = new cop.Context();
Adaptation56 = Trait ({
    test: function() {
        return 56;
    }
});
Context56.adapt(foo, Adaptation56); 

Context57 = new cop.Context();
Adaptation57 = Trait ({
    test: function() {
        return 57;
    }
});
Context57.adapt(foo, Adaptation57); 

Context58 = new cop.Context();
Adaptation58 = Trait ({
    test: function() {
        return 58;
    }
});
Context58.adapt(foo, Adaptation58); 

Context59 = new cop.Context();
Adaptation59 = Trait ({
    test: function() {
        return 59;
    }
});
Context59.adapt(foo, Adaptation59); 

Context60 = new cop.Context();
Adaptation60 = Trait ({
    test: function() {
        return 60;
    }
});
Context60.adapt(foo, Adaptation60); 

Context61 = new cop.Context();
Adaptation61 = Trait ({
    test: function() {
        return 61;
    }
});
Context61.adapt(foo, Adaptation61); 

Context62 = new cop.Context();
Adaptation62 = Trait ({
    test: function() {
        return 62;
    }
});
Context62.adapt(foo, Adaptation62); 

Context63 = new cop.Context();
Adaptation63 = Trait ({
    test: function() {
        return 63;
    }
});
Context63.adapt(foo, Adaptation63); 

Context64 = new cop.Context();
Adaptation64 = Trait ({
    test: function() {
        return 64;
    }
});
Context64.adapt(foo, Adaptation64); 

Context65 = new cop.Context();
Adaptation65 = Trait ({
    test: function() {
        return 65;
    }
});
Context65.adapt(foo, Adaptation65); 

Context66 = new cop.Context();
Adaptation66 = Trait ({
    test: function() {
        return 66;
    }
});
Context66.adapt(foo, Adaptation66); 

Context67 = new cop.Context();
Adaptation67 = Trait ({
    test: function() {
        return 67;
    }
});
Context67.adapt(foo, Adaptation67); 

Context68 = new cop.Context();
Adaptation68 = Trait ({
    test: function() {
        return 68;
    }
});
Context68.adapt(foo, Adaptation68); 

Context69 = new cop.Context();
Adaptation69 = Trait ({
    test: function() {
        return 69;
    }
});
Context69.adapt(foo, Adaptation69); 

Context70 = new cop.Context();
Adaptation70 = Trait ({
    test: function() {
        return 70;
    }
});
Context70.adapt(foo, Adaptation70); 

Context71 = new cop.Context();
Adaptation71 = Trait ({
    test: function() {
        return 71;
    }
});
Context71.adapt(foo, Adaptation71); 

Context72 = new cop.Context();
Adaptation72 = Trait ({
    test: function() {
        return 72;
    }
});
Context72.adapt(foo, Adaptation72); 

Context73 = new cop.Context();
Adaptation73 = Trait ({
    test: function() {
        return 73;
    }
});
Context73.adapt(foo, Adaptation73); 

Context74 = new cop.Context();
Adaptation74 = Trait ({
    test: function() {
        return 74;
    }
});
Context74.adapt(foo, Adaptation74); 

Context75 = new cop.Context();
Adaptation75 = Trait ({
    test: function() {
        return 75;
    }
});
Context75.adapt(foo, Adaptation75); 

Context76 = new cop.Context();
Adaptation76 = Trait ({
    test: function() {
        return 76;
    }
});
Context76.adapt(foo, Adaptation76); 

Context77 = new cop.Context();
Adaptation77 = Trait ({
    test: function() {
        return 77;
    }
});
Context77.adapt(foo, Adaptation77); 

Context78 = new cop.Context();
Adaptation78 = Trait ({
    test: function() {
        return 78;
    }
});
Context78.adapt(foo, Adaptation78); 

Context79 = new cop.Context();
Adaptation79 = Trait ({
    test: function() {
        return 79;
    }
});
Context79.adapt(foo, Adaptation79); 

Context80 = new cop.Context();
Adaptation80 = Trait ({
    test: function() {
        return 80;
    }
});
Context80.adapt(foo, Adaptation80); 

Context81 = new cop.Context();
Adaptation81 = Trait ({
    test: function() {
        return 81;
    }
});
Context81.adapt(foo, Adaptation81); 

Context82 = new cop.Context();
Adaptation82 = Trait ({
    test: function() {
        return 82;
    }
});
Context82.adapt(foo, Adaptation82); 

Context83 = new cop.Context();
Adaptation83 = Trait ({
    test: function() {
        return 83;
    }
});
Context83.adapt(foo, Adaptation83); 

Context84 = new cop.Context();
Adaptation84 = Trait ({
    test: function() {
        return 84;
    }
});
Context84.adapt(foo, Adaptation84); 

Context85 = new cop.Context();
Adaptation85 = Trait ({
    test: function() {
        return 85;
    }
});
Context85.adapt(foo, Adaptation85); 

Context86 = new cop.Context();
Adaptation86 = Trait ({
    test: function() {
        return 86;
    }
});
Context86.adapt(foo, Adaptation86); 

Context87 = new cop.Context();
Adaptation87 = Trait ({
    test: function() {
        return 87;
    }
});
Context87.adapt(foo, Adaptation87); 

Context88 = new cop.Context();
Adaptation88 = Trait ({
    test: function() {
        return 88;
    }
});
Context88.adapt(foo, Adaptation88); 

Context89 = new cop.Context();
Adaptation89 = Trait ({
    test: function() {
        return 89;
    }
});
Context89.adapt(foo, Adaptation89); 

Context90 = new cop.Context();
Adaptation90 = Trait ({
    test: function() {
        return 90;
    }
});
Context90.adapt(foo, Adaptation90); 

Context91 = new cop.Context();
Adaptation91 = Trait ({
    test: function() {
        return 91;
    }
});
Context91.adapt(foo, Adaptation91); 

Context92 = new cop.Context();
Adaptation92 = Trait ({
    test: function() {
        return 92;
    }
});
Context92.adapt(foo, Adaptation92); 

Context93 = new cop.Context();
Adaptation93 = Trait ({
    test: function() {
        return 93;
    }
});
Context93.adapt(foo, Adaptation93); 

Context94 = new cop.Context();
Adaptation94 = Trait ({
    test: function() {
        return 94;
    }
});
Context94.adapt(foo, Adaptation94); 

Context95 = new cop.Context();
Adaptation95 = Trait ({
    test: function() {
        return 95;
    }
});
Context95.adapt(foo, Adaptation95); 

Context96 = new cop.Context();
Adaptation96 = Trait ({
    test: function() {
        return 96;
    }
});
Context96.adapt(foo, Adaptation96); 

Context97 = new cop.Context();
Adaptation97 = Trait ({
    test: function() {
        return 97;
    }
});
Context97.adapt(foo, Adaptation97); 

Context98 = new cop.Context();
Adaptation98 = Trait ({
    test: function() {
        return 98;
    }
});
Context98.adapt(foo, Adaptation98); 

Context99 = new cop.Context();
Adaptation99 = Trait ({
    test: function() {
        return 99;
    }
});
Context99.adapt(foo, Adaptation99); 

Context100 = new cop.Context();
Adaptation100 = Trait ({
    test: function() {
        return 100;
    }
});
Context100.adapt(foo, Adaptation100); 


function testContexts() {
    var i;
    var j;
    var ITER = 1000;
    var CALLS = 100;
    var beginning_time = new Date().getTime();
    for(i = 0; i < ITER; i++) {
        num = 1 + Math.floor(Math.random()*100);
        eval("Context"+num+".activate();");
        for(j=1; j<=CALLS; j++) {
          foo.test();
        }
        eval("Context"+num+".deactivate();");
    }
    var end_time = new Date().getTime();
    return end_time - beginning_time;
} 

function runs(run) {
    var fs = require("fs");
    var times;
    fs.writeFileSync("./runs_contexts/100/test"+run+".csv", "");
    fs.appendFileSync("./runs_contexts/100/test"+run+".csv", "iteration, Elapsed time in milliseconds \n");
    for(times = 1; times <= 100; times++) {
        var elapsed_time = testContexts();
        fs.appendFileSync("./runs_contexts/100/test"+run+".csv", times + "," + elapsed_time + "\n");
    }
}

var run;
for(run=1; run <=10; run++) {
    runs(run);
}

