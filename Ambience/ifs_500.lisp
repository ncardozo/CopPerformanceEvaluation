(defun if-test (mode)
  (cond 
    ((eq mode 0) 0) 
    ((eq mode 1) 1) 
    ((eq mode 2) 2) 
    ((eq mode 3) 3) 
    ((eq mode 4) 4) 
    ((eq mode 5) 5) 
    ((eq mode 6) 6) 
    ((eq mode 7) 7) 
    ((eq mode 8) 8) 
    ((eq mode 9) 9) 
    ((eq mode 10) 10) 
    ((eq mode 11) 11) 
    ((eq mode 12) 12) 
    ((eq mode 13) 13) 
    ((eq mode 14) 14) 
    ((eq mode 15) 15) 
    ((eq mode 16) 16) 
    ((eq mode 17) 17) 
    ((eq mode 18) 18) 
    ((eq mode 19) 19) 
    ((eq mode 20) 20) 
    ((eq mode 21) 21) 
    ((eq mode 22) 22) 
    ((eq mode 23) 23) 
    ((eq mode 24) 24) 
    ((eq mode 25) 25) 
    ((eq mode 26) 26) 
    ((eq mode 27) 27) 
    ((eq mode 28) 28) 
    ((eq mode 29) 29) 
    ((eq mode 30) 30) 
    ((eq mode 31) 31) 
    ((eq mode 32) 32) 
    ((eq mode 33) 33) 
    ((eq mode 34) 34) 
    ((eq mode 35) 35) 
    ((eq mode 36) 36) 
    ((eq mode 37) 37) 
    ((eq mode 38) 38) 
    ((eq mode 39) 39) 
    ((eq mode 40) 40) 
    ((eq mode 41) 41) 
    ((eq mode 42) 42) 
    ((eq mode 43) 43) 
    ((eq mode 44) 44) 
    ((eq mode 45) 45) 
    ((eq mode 46) 46) 
    ((eq mode 47) 47) 
    ((eq mode 48) 48) 
    ((eq mode 49) 49) 
    ((eq mode 50) 50) 
    ((eq mode 51) 51) 
    ((eq mode 52) 52) 
    ((eq mode 53) 53) 
    ((eq mode 54) 54) 
    ((eq mode 55) 55) 
    ((eq mode 56) 56) 
    ((eq mode 57) 57) 
    ((eq mode 58) 58) 
    ((eq mode 59) 59) 
    ((eq mode 60) 60) 
    ((eq mode 61) 61) 
    ((eq mode 62) 62) 
    ((eq mode 63) 63) 
    ((eq mode 64) 64) 
    ((eq mode 65) 65) 
    ((eq mode 66) 66) 
    ((eq mode 67) 67) 
    ((eq mode 68) 68) 
    ((eq mode 69) 69) 
    ((eq mode 70) 70) 
    ((eq mode 71) 71) 
    ((eq mode 72) 72) 
    ((eq mode 73) 73) 
    ((eq mode 74) 74) 
    ((eq mode 75) 75) 
    ((eq mode 76) 76) 
    ((eq mode 77) 77) 
    ((eq mode 78) 78) 
    ((eq mode 79) 79) 
    ((eq mode 80) 80) 
    ((eq mode 81) 81) 
    ((eq mode 82) 82) 
    ((eq mode 83) 83) 
    ((eq mode 84) 84) 
    ((eq mode 85) 85) 
    ((eq mode 86) 86) 
    ((eq mode 87) 87) 
    ((eq mode 88) 88) 
    ((eq mode 89) 89) 
    ((eq mode 90) 90) 
    ((eq mode 91) 91) 
    ((eq mode 92) 92) 
    ((eq mode 93) 93) 
    ((eq mode 94) 94) 
    ((eq mode 95) 95) 
    ((eq mode 96) 96) 
    ((eq mode 97) 97) 
    ((eq mode 98) 98) 
    ((eq mode 99) 99) 
    ((eq mode 100) 100) 
    ((eq mode 101) 101) 
    ((eq mode 102) 102) 
    ((eq mode 103) 103) 
    ((eq mode 104) 104) 
    ((eq mode 105) 105) 
    ((eq mode 106) 106) 
    ((eq mode 107) 107) 
    ((eq mode 108) 108) 
    ((eq mode 109) 109) 
    ((eq mode 110) 110) 
    ((eq mode 111) 111) 
    ((eq mode 112) 112) 
    ((eq mode 113) 113) 
    ((eq mode 114) 114) 
    ((eq mode 115) 115) 
    ((eq mode 116) 116) 
    ((eq mode 117) 117) 
    ((eq mode 118) 118) 
    ((eq mode 119) 119) 
    ((eq mode 120) 120) 
    ((eq mode 121) 121) 
    ((eq mode 122) 122) 
    ((eq mode 123) 123) 
    ((eq mode 124) 124) 
    ((eq mode 125) 125) 
    ((eq mode 126) 126) 
    ((eq mode 127) 127) 
    ((eq mode 128) 128) 
    ((eq mode 129) 129) 
    ((eq mode 130) 130) 
    ((eq mode 131) 131) 
    ((eq mode 132) 132) 
    ((eq mode 133) 133) 
    ((eq mode 134) 134) 
    ((eq mode 135) 135) 
    ((eq mode 136) 136) 
    ((eq mode 137) 137) 
    ((eq mode 138) 138) 
    ((eq mode 139) 139) 
    ((eq mode 140) 140) 
    ((eq mode 141) 141) 
    ((eq mode 142) 142) 
    ((eq mode 143) 143) 
    ((eq mode 144) 144) 
    ((eq mode 145) 145) 
    ((eq mode 146) 146) 
    ((eq mode 147) 147) 
    ((eq mode 148) 148) 
    ((eq mode 149) 149) 
    ((eq mode 150) 150) 
    ((eq mode 151) 151) 
    ((eq mode 152) 152) 
    ((eq mode 153) 153) 
    ((eq mode 154) 154) 
    ((eq mode 155) 155) 
    ((eq mode 156) 156) 
    ((eq mode 157) 157) 
    ((eq mode 158) 158) 
    ((eq mode 159) 159) 
    ((eq mode 160) 160) 
    ((eq mode 161) 161) 
    ((eq mode 162) 162) 
    ((eq mode 163) 163) 
    ((eq mode 164) 164) 
    ((eq mode 165) 165) 
    ((eq mode 166) 166) 
    ((eq mode 167) 167) 
    ((eq mode 168) 168) 
    ((eq mode 169) 169) 
    ((eq mode 170) 170) 
    ((eq mode 171) 171) 
    ((eq mode 172) 172) 
    ((eq mode 173) 173) 
    ((eq mode 174) 174) 
    ((eq mode 175) 175) 
    ((eq mode 176) 176) 
    ((eq mode 177) 177) 
    ((eq mode 178) 178) 
    ((eq mode 179) 179) 
    ((eq mode 180) 180) 
    ((eq mode 181) 181) 
    ((eq mode 182) 182) 
    ((eq mode 183) 183) 
    ((eq mode 184) 184) 
    ((eq mode 185) 185) 
    ((eq mode 186) 186) 
    ((eq mode 187) 187) 
    ((eq mode 188) 188) 
    ((eq mode 189) 189) 
    ((eq mode 190) 190) 
    ((eq mode 191) 191) 
    ((eq mode 192) 192) 
    ((eq mode 193) 193) 
    ((eq mode 194) 194) 
    ((eq mode 195) 195) 
    ((eq mode 196) 196) 
    ((eq mode 197) 197) 
    ((eq mode 198) 198) 
    ((eq mode 199) 199) 
    ((eq mode 200) 200) 
    ((eq mode 201) 201) 
    ((eq mode 202) 202) 
    ((eq mode 203) 203) 
    ((eq mode 204) 204) 
    ((eq mode 205) 205) 
    ((eq mode 206) 206) 
    ((eq mode 207) 207) 
    ((eq mode 208) 208) 
    ((eq mode 209) 209) 
    ((eq mode 210) 210) 
    ((eq mode 211) 211) 
    ((eq mode 212) 212) 
    ((eq mode 213) 213) 
    ((eq mode 214) 214) 
    ((eq mode 215) 215) 
    ((eq mode 216) 216) 
    ((eq mode 217) 217) 
    ((eq mode 218) 218) 
    ((eq mode 219) 219) 
    ((eq mode 220) 220) 
    ((eq mode 221) 221) 
    ((eq mode 222) 222) 
    ((eq mode 223) 223) 
    ((eq mode 224) 224) 
    ((eq mode 225) 225) 
    ((eq mode 226) 226) 
    ((eq mode 227) 227) 
    ((eq mode 228) 228) 
    ((eq mode 229) 229) 
    ((eq mode 230) 230) 
    ((eq mode 231) 231) 
    ((eq mode 232) 232) 
    ((eq mode 233) 233) 
    ((eq mode 234) 234) 
    ((eq mode 235) 235) 
    ((eq mode 236) 236) 
    ((eq mode 237) 237) 
    ((eq mode 238) 238) 
    ((eq mode 239) 239) 
    ((eq mode 240) 240) 
    ((eq mode 241) 241) 
    ((eq mode 242) 242) 
    ((eq mode 243) 243) 
    ((eq mode 244) 244) 
    ((eq mode 245) 245) 
    ((eq mode 246) 246) 
    ((eq mode 247) 247) 
    ((eq mode 248) 248) 
    ((eq mode 249) 249) 
    ((eq mode 250) 250) 
    ((eq mode 251) 251) 
    ((eq mode 252) 252) 
    ((eq mode 253) 253) 
    ((eq mode 254) 254) 
    ((eq mode 255) 255) 
    ((eq mode 256) 256) 
    ((eq mode 257) 257) 
    ((eq mode 258) 258) 
    ((eq mode 259) 259) 
    ((eq mode 260) 260) 
    ((eq mode 261) 261) 
    ((eq mode 262) 262) 
    ((eq mode 263) 263) 
    ((eq mode 264) 264) 
    ((eq mode 265) 265) 
    ((eq mode 266) 266) 
    ((eq mode 267) 267) 
    ((eq mode 268) 268) 
    ((eq mode 269) 269) 
    ((eq mode 270) 270) 
    ((eq mode 271) 271) 
    ((eq mode 272) 272) 
    ((eq mode 273) 273) 
    ((eq mode 274) 274) 
    ((eq mode 275) 275) 
    ((eq mode 276) 276) 
    ((eq mode 277) 277) 
    ((eq mode 278) 278) 
    ((eq mode 279) 279) 
    ((eq mode 280) 280) 
    ((eq mode 281) 281) 
    ((eq mode 282) 282) 
    ((eq mode 283) 283) 
    ((eq mode 284) 284) 
    ((eq mode 285) 285) 
    ((eq mode 286) 286) 
    ((eq mode 287) 287) 
    ((eq mode 288) 288) 
    ((eq mode 289) 289) 
    ((eq mode 290) 290) 
    ((eq mode 291) 291) 
    ((eq mode 292) 292) 
    ((eq mode 293) 293) 
    ((eq mode 294) 294) 
    ((eq mode 295) 295) 
    ((eq mode 296) 296) 
    ((eq mode 297) 297) 
    ((eq mode 298) 298) 
    ((eq mode 299) 299) 
    ((eq mode 300) 300) 
    ((eq mode 301) 301) 
    ((eq mode 302) 302) 
    ((eq mode 303) 303) 
    ((eq mode 304) 304) 
    ((eq mode 305) 305) 
    ((eq mode 306) 306) 
    ((eq mode 307) 307) 
    ((eq mode 308) 308) 
    ((eq mode 309) 309) 
    ((eq mode 310) 310) 
    ((eq mode 311) 311) 
    ((eq mode 312) 312) 
    ((eq mode 313) 313) 
    ((eq mode 314) 314) 
    ((eq mode 315) 315) 
    ((eq mode 316) 316) 
    ((eq mode 317) 317) 
    ((eq mode 318) 318) 
    ((eq mode 319) 319) 
    ((eq mode 320) 320) 
    ((eq mode 321) 321) 
    ((eq mode 322) 322) 
    ((eq mode 323) 323) 
    ((eq mode 324) 324) 
    ((eq mode 325) 325) 
    ((eq mode 326) 326) 
    ((eq mode 327) 327) 
    ((eq mode 328) 328) 
    ((eq mode 329) 329) 
    ((eq mode 330) 330) 
    ((eq mode 331) 331) 
    ((eq mode 332) 332) 
    ((eq mode 333) 333) 
    ((eq mode 334) 334) 
    ((eq mode 335) 335) 
    ((eq mode 336) 336) 
    ((eq mode 337) 337) 
    ((eq mode 338) 338) 
    ((eq mode 339) 339) 
    ((eq mode 340) 340) 
    ((eq mode 341) 341) 
    ((eq mode 342) 342) 
    ((eq mode 343) 343) 
    ((eq mode 344) 344) 
    ((eq mode 345) 345) 
    ((eq mode 346) 346) 
    ((eq mode 347) 347) 
    ((eq mode 348) 348) 
    ((eq mode 349) 349) 
    ((eq mode 350) 350) 
    ((eq mode 351) 351) 
    ((eq mode 352) 352) 
    ((eq mode 353) 353) 
    ((eq mode 354) 354) 
    ((eq mode 355) 355) 
    ((eq mode 356) 356) 
    ((eq mode 357) 357) 
    ((eq mode 358) 358) 
    ((eq mode 359) 359) 
    ((eq mode 360) 360) 
    ((eq mode 361) 361) 
    ((eq mode 362) 362) 
    ((eq mode 363) 363) 
    ((eq mode 364) 364) 
    ((eq mode 365) 365) 
    ((eq mode 366) 366) 
    ((eq mode 367) 367) 
    ((eq mode 368) 368) 
    ((eq mode 369) 369) 
    ((eq mode 370) 370) 
    ((eq mode 371) 371) 
    ((eq mode 372) 372) 
    ((eq mode 373) 373) 
    ((eq mode 374) 374) 
    ((eq mode 375) 375) 
    ((eq mode 376) 376) 
    ((eq mode 377) 377) 
    ((eq mode 378) 378) 
    ((eq mode 379) 379) 
    ((eq mode 380) 380) 
    ((eq mode 381) 381) 
    ((eq mode 382) 382) 
    ((eq mode 383) 383) 
    ((eq mode 384) 384) 
    ((eq mode 385) 385) 
    ((eq mode 386) 386) 
    ((eq mode 387) 387) 
    ((eq mode 388) 388) 
    ((eq mode 389) 389) 
    ((eq mode 390) 390) 
    ((eq mode 391) 391) 
    ((eq mode 392) 392) 
    ((eq mode 393) 393) 
    ((eq mode 394) 394) 
    ((eq mode 395) 395) 
    ((eq mode 396) 396) 
    ((eq mode 397) 397) 
    ((eq mode 398) 398) 
    ((eq mode 399) 399) 
    ((eq mode 400) 400) 
    ((eq mode 401) 401) 
    ((eq mode 402) 402) 
    ((eq mode 403) 403) 
    ((eq mode 404) 404) 
    ((eq mode 405) 405) 
    ((eq mode 406) 406) 
    ((eq mode 407) 407) 
    ((eq mode 408) 408) 
    ((eq mode 409) 409) 
    ((eq mode 410) 410) 
    ((eq mode 411) 411) 
    ((eq mode 412) 412) 
    ((eq mode 413) 413) 
    ((eq mode 414) 414) 
    ((eq mode 415) 415) 
    ((eq mode 416) 416) 
    ((eq mode 417) 417) 
    ((eq mode 418) 418) 
    ((eq mode 419) 419) 
    ((eq mode 420) 420) 
    ((eq mode 421) 421) 
    ((eq mode 422) 422) 
    ((eq mode 423) 423) 
    ((eq mode 424) 424) 
    ((eq mode 425) 425) 
    ((eq mode 426) 426) 
    ((eq mode 427) 427) 
    ((eq mode 428) 428) 
    ((eq mode 429) 429) 
    ((eq mode 430) 430) 
    ((eq mode 431) 431) 
    ((eq mode 432) 432) 
    ((eq mode 433) 433) 
    ((eq mode 434) 434) 
    ((eq mode 435) 435) 
    ((eq mode 436) 436) 
    ((eq mode 437) 437) 
    ((eq mode 438) 438) 
    ((eq mode 439) 439) 
    ((eq mode 440) 440) 
    ((eq mode 441) 441) 
    ((eq mode 442) 442) 
    ((eq mode 443) 443) 
    ((eq mode 444) 444) 
    ((eq mode 445) 445) 
    ((eq mode 446) 446) 
    ((eq mode 447) 447) 
    ((eq mode 448) 448) 
    ((eq mode 449) 449) 
    ((eq mode 450) 450) 
    ((eq mode 451) 451) 
    ((eq mode 452) 452) 
    ((eq mode 453) 453) 
    ((eq mode 454) 454) 
    ((eq mode 455) 455) 
    ((eq mode 456) 456) 
    ((eq mode 457) 457) 
    ((eq mode 458) 458) 
    ((eq mode 459) 459) 
    ((eq mode 460) 460) 
    ((eq mode 461) 461) 
    ((eq mode 462) 462) 
    ((eq mode 463) 463) 
    ((eq mode 464) 464) 
    ((eq mode 465) 465) 
    ((eq mode 466) 466) 
    ((eq mode 467) 467) 
    ((eq mode 468) 468) 
    ((eq mode 469) 469) 
    ((eq mode 470) 470) 
    ((eq mode 471) 471) 
    ((eq mode 472) 472) 
    ((eq mode 473) 473) 
    ((eq mode 474) 474) 
    ((eq mode 475) 475) 
    ((eq mode 476) 476) 
    ((eq mode 477) 477) 
    ((eq mode 478) 478) 
    ((eq mode 479) 479) 
    ((eq mode 480) 480) 
    ((eq mode 481) 481) 
    ((eq mode 482) 482) 
    ((eq mode 483) 483) 
    ((eq mode 484) 484) 
    ((eq mode 485) 485) 
    ((eq mode 486) 486) 
    ((eq mode 487) 487) 
    ((eq mode 488) 488) 
    ((eq mode 489) 489) 
    ((eq mode 490) 490) 
    ((eq mode 491) 491) 
    ((eq mode 492) 492) 
    ((eq mode 493) 493) 
    ((eq mode 494) 494) 
    ((eq mode 495) 495) 
    ((eq mode 496) 496) 
    ((eq mode 497) 497) 
    ((eq mode 498) 498) 
    ((eq mode 499) 499) 
    ((eq mode 500) 500) 
)) 

(defvar beginning-time 0) 
(defvar num 0) 
 
(defun testContexts () 
    (let ((res 0)) 
    (setq beginning-time (get-internal-real-time))
    (loop for i from 0 to 1000
      do (setq num (+ (random 500) 1))
      (loop for j from 1 to 100
        do (if-test num)))
      (setq res (- (get-internal-real-time) beginning-time))
      res))

(defvar elapsed-time -1)
(defvar filename "")
 
(defun ifs-runs (run)
  (setq filename (format nil "runs_ifs/500/test~d.csv" run))
  (with-open-file (str filename
                    :direction :output
                    :if-exists :supersede
                    :if-does-not-exist :create)
    (format str "Iteration, Elapsed time in milliseconds ~%")
      (loop for times from 1 to 100
        do (setq elapsed-time (testContexts))
        (format str "~d, ~d~%" times elapsed-time))))

(defun main ()
  (loop for run from 1 to 10
    do (ifs-runs run)))
